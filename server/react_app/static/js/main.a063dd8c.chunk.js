(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t){e.exports="data:image/png;base64,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"},150:function(e,t,a){e.exports=a(201)},155:function(e,t,a){},198:function(e,t){},201:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),i=a.n(o),c=(a(155),a(240)),s=a(46),l=a(34),m=a(49),u=a(69),p=Object(u.a)({overrides:{MuiButton:{root:{color:"white",backgroundColor:"#6583F2",borderRadius:500,"&:hover":{color:"#6583F2",backgroundColor:"#EAEEFD"}}},MuiCheckbox:{root:{color:"#6583F2"}}},typography:{fontFamily:'"Roboto"'},primary:"#6583F2",secondary:"#EAEEFD",error:"#d8000c",bgcolor:"#fafbff"}),d=a(75),g=a.n(d),h=a(76),f=a.n(h),b={variant:"success"},v={variant:"error"},E=["Reddit","Twitter"],y={Reddit:g.a,Twitter:f.a},S=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],k=function(e){var t=S[e.getMonth()],a=e.getDate(),n=e.getHours(),r=n>=12?"PM":"AM";n%=12;var o=e.getMinutes();return o=o<10?"0".concat(o):o,"".concat(t," ").concat(a," ").concat(n,":").concat(o," ").concat(r)};var w=function(){localStorage.getItem("names")&&localStorage.getItem("email")?window.location="/dashboard":window.location="login"},O=a(95),j=a(242),N=a(243),C=a(251),x=a(114),T=a.n(x),M=Object(O.a)((function(e){return{toolbar:{backgroundColor:e.primary}}}));var I=function(e){var t=M();return r.a.createElement(j.a,{position:"static",elevation:0},r.a.createElement(N.a,{className:t.toolbar},r.a.createElement(C.a,{style:{flexGrow:"".concat(e.flexGrow)}},r.a.createElement("img",{src:T.a,alt:"Logo"})),e.children))},A=a(135),_=a(244),B=Object(O.a)((function(e){return{account_msg:{marginRight:e.spacing(2)},account_btn:{paddingLeft:e.spacing(5),paddingRight:e.spacing(5),borderRadius:e.spacing(4),fontSize:12},link:{textDecoration:"none",color:"inherit"}}}));var F=function(e){var t=B();return r.a.createElement(I,{flexGrow:1},r.a.createElement(A.a,{variant:"subtitle1",className:t.account_msg},e.accountMsg),r.a.createElement(l.b,{to:e.link,className:t.link},r.a.createElement(_.a,{variant:"outlined",color:"inherit",className:t.account_btn},e.btnMsg)))},P=a(15),R=a(14),V=a(25),J=a(26),D=a(28),W=a(4),L=a(250),H=Object(O.a)((function(e){return{signup_form_container:{margin:"auto",width:"fit-content",backgroundColor:"white",marginTop:e.spacing(4)},signup_form:{padding:e.spacing(4)},signup_form__subtitle:{color:e.primary},signup_form__btn:{display:"block",borderRadius:500,width:150,margin:"auto",marginTop:e.spacing(2),padding:e.spacing(2)}}}));var q=function(e){var t=H();return r.a.createElement(C.a,{className:t.signup_form_container,borderRadius:8,boxShadow:1},r.a.createElement("form",{className:t.signup_form,onSubmit:e.submit},r.a.createElement(A.a,{variant:"h5",align:"center"},r.a.createElement(C.a,{fontWeight:"fontWeightBold"},e.mainMsg)),r.a.createElement(A.a,{variant:"subtitle1",align:"center",className:t.signup_form__subtitle},e.subMsg),e.children,r.a.createElement(_.a,{type:"submit",className:t.signup_form__btn},e.btnMsg)))},z="Your password must be at least ".concat(7," characters long"),K=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(V.a)(this,Object(J.a)(t).call(this,e))).handleChange=function(e){switch(e){case 0:a.setState({emailErr:!1,emailErrMsg:""});break;case 1:a.setState({passwordErr:!1,passwordErrMsg:""});break;case 2:a.setState({confirmErr:!1,confirmErrMsg:""});break;default:return}},a.handleSubmit=function(e){e.preventDefault();var t=a.email.current.value,n=a.name.current.value,r=a.password.current.value,o=a.confirm.current.value;a.validate(t,r,o)&&fetch("/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,companies:n,password:r})}).then((function(e){201===e.status?e.json().then((function(e){localStorage.setItem("email",e.email),localStorage.setItem("companies",e.companies),localStorage.setItem("sites",JSON.stringify(e.sites)),a.props.history.push("/dashboard")})):e.status>=500?a.setState({emailErr:!0,emailErrMsg:"Server has malfunctioned. Please try again later"}):e.json().then((function(e){a.setState({emailErr:!0,emailErrMsg:"That email is already taken",passwordErr:!1,passwordErrMsg:""})}))})).catch((function(e){return console.error("Error: ",e)}))},a.validate=function(e,t,n){var r=!0;return t.length<7&&(a.setState({passwordErr:!0,passwordErrMsg:z}),r=!1),t!==n&&(a.setState({passwordErr:!0,confirmErr:!0,passwordErrMsg:"Passwords do not match",confirmErrMsg:"Passwords do not match"}),r=!1),r},a.email=r.a.createRef(),a.name=r.a.createRef(),a.password=r.a.createRef(),a.confirm=r.a.createRef(),a.state={emailErr:!1,passwordErr:!1,confirmErr:!1,emailErrMsg:"",passwordErrMsg:"",confirmErrMsg:""},a}return Object(D.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(q,{mainMsg:"Let's get Started!",subMsg:"Create an account",btnMsg:"Create",submit:this.handleSubmit},r.a.createElement(L.a,{className:t.signup_form__inputs,variant:"outlined",fullWidth:!0,placeholder:"Your email",type:"email",inputProps:{"aria-label":"email"},required:!0,inputRef:this.email,error:this.state.emailErr,helperText:this.state.emailErrMsg,onChange:function(){return e.handleChange(0)}}),r.a.createElement(L.a,{className:t.signup_form__inputs,variant:"outlined",fullWidth:!0,placeholder:"Your company name",inputProps:{"aria-label":"company name"},required:!0,inputRef:this.name}),r.a.createElement(L.a,{className:t.signup_form__inputs,variant:"outlined",fullWidth:!0,placeholder:"Your password",type:"password",inputProps:{"aria-label":"password"},required:!0,inputRef:this.password,error:this.state.passwordErr,helperText:this.state.passwordErrMsg,onChange:function(){return e.handleChange(1)}}),r.a.createElement(L.a,{className:t.signup_form__inputs,variant:"outlined",fullWidth:!0,placeholder:"Confirm password",type:"password",inputProps:{"aria-label":"password"},required:!0,inputRef:this.confirm,error:this.state.confirmErr,helperText:this.state.confirmErrMsg,onChange:function(){return e.handleChange(2)}}))}}]),t}(n.Component),G=Object(W.a)((function(e){return{signup_form__inputs:{padding:e.spacing(2),width:300,display:"block"}}}))(K);var U=function(e){return r.a.createElement("div",null,r.a.createElement(F,{accountMsg:"Already have an account?",btnMsg:"Login",link:"login"}),r.a.createElement(G,{history:e.history}))},Q=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(V.a)(this,Object(J.a)(t).call(this,e))).handleChange=function(){a.setState({emailErr:!1,passwordErr:!1,emailErrMsg:"",passwordErrMsg:""})},a.handleSubmit=function(e){e.preventDefault();var t=a.email.current.value,n=a.password.current.value;fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){200===e.status?e.json().then((function(e){localStorage.setItem("email",e.email),localStorage.setItem("companies",e.companies),localStorage.setItem("sites",JSON.stringify(e.sites)),a.props.history.push("/dashboard")})):a.setState({emailErr:!0,emailErrMsg:"Incorrect email or password",passwordErr:!0,passwordErrMsg:"Incorrect email or password"})})).catch((function(e){return console.error("Error: ",e)}))},a.email=r.a.createRef(),a.password=r.a.createRef(),a.state={emailErr:!1,passwordErr:!1,emailErrMsg:"",passwordErrMsg:""},a}return Object(D.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(q,{mainMsg:"Welcome back!",subMsg:"Login to your account",btnMsg:"Log in",submit:this.handleSubmit},r.a.createElement(L.a,{className:e.signup_form__inputs,variant:"outlined",fullWidth:!0,placeholder:"Your email",type:"email",inputProps:{"aria-label":"email"},required:!0,inputRef:this.email,error:this.state.emailErr,helperText:this.state.emailErrMsg,onChange:this.handleChange}),r.a.createElement(L.a,{className:e.signup_form__inputs,variant:"outlined",fullWidth:!0,placeholder:"Your password",type:"password",inputProps:{"aria-label":"password"},required:!0,inputRef:this.password,error:this.state.passwordErr,helperText:this.state.passwordErrMsg,onChange:this.handleChange}))}}]),t}(n.Component),Y=Object(W.a)((function(e){return{signup_form__inputs:{marginTop:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(2),width:300,display:"block"}}}))(Q);var X=function(e){return r.a.createElement("div",null,r.a.createElement(F,{accountMsg:"Don't have an account?",btnMsg:"Sign Up",link:"signup"}),r.a.createElement(Y,{history:e.history}))},Z=a(10),$=a(78),ee=a.n($),te=a(39),ae=a(255),ne=a(119),re=a.n(ne),oe=a(118),ie=a.n(oe),ce=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(V.a)(this,Object(J.a)(t).call(this,e))).handleChange=function(e){a.hasChanged=!0,clearTimeout(a.delayTimer);var t=e.target.value;a.setState({value:t},a.callTimer)},a.state={value:"",open:!1},a.delayTimer=null,a.hasChanged=!1,a.callTimer=a.callTimer.bind(Object(te.a)(a)),a}return Object(D.a)(t,e),Object(R.a)(t,[{key:"callTimer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?this.hasChanged&&(this.hasChanged=!1,clearTimeout(this.delayTimer),this.props.search(this.state.value)):this.delayTimer=setTimeout((function(){e.props.search(e.state.value),e.hasChanged=!1}),2e3)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.open;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.search_container},r.a.createElement(ae.a,{placeholder:"Search\u2026",className:"".concat(a.className," ").concat(a.search_bar),inputProps:{"aria-label":"search"},value:this.state.value,onChange:this.handleChange}),r.a.createElement("div",{className:a.icon},r.a.createElement(ie.a,{onClick:n,fontSize:"small"})),r.a.createElement("div",{className:a.icon},r.a.createElement(re.a,{onClick:function(){return e.callTimer(!0)}}))))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.delayTimer)}}]),t}(n.Component),se=Object(W.a)((function(e){return{search_container:{display:"flex",alignItems:"center",width:400,color:"black",backgroundColor:"white",borderRadius:"20px",padding:"5px 20px"},search_bar:{flexGrow:1},icon:{cursor:"pointer",color:e.primary,marginRight:e.spacing(1)}}}))(ce),le=Object(O.a)((function(e){return{search_bar_container:{margin:"auto"},link:{textDecoration:"none",color:"inherit"}}}));var me=r.a.memo((function(e){var t=le(),a=e.children,n=e.search,o=e.link,i=e.open;return r.a.createElement(I,{flexGrow:"initial"},r.a.createElement(C.a,{className:t.search_bar_container},r.a.createElement(se,{search:n,open:i})),r.a.createElement(l.b,{to:o,className:t.link},a))}),(function(){return!0})),ue=a(27),pe=a(20),de=a(246),ge=a(120),he=a.n(ge)()("http://mentions-crawler.herokuapp.com",{autoConnect:!1}),fe=Object(O.a)((function(e){return{card:{display:"grid",gridTemplateColumns:"1fr 2fr 1fr",width:"100%",height:100,alignItems:"center",justifyItems:"center",borderBottom:"1px solid #ddd"},platform_logo:{width:"70%"},platform_name:{justifySelf:"left",fontWeight:"bold",marginLeft:e.spacing(1)}}}));var be=r.a.memo((function(e){var t=fe(),a=e.site_name,n=e.site_img,o=e.isToggled,i=e.history,c=Object(pe.a)(),l=Object(s.useSnackbar)().enqueueSnackbar,m=Object(W.a)({switchBase:{color:c.primary,"&$checked":{color:c.primary},"&$checked + $track":{backgroundColor:c.primary}},checked:{},track:{}})(de.a);return r.a.createElement("div",{className:t.card},r.a.createElement("img",{src:n,className:t.platform_logo,alt:"Platform logo"}),r.a.createElement(A.a,{className:t.platform_name},a),r.a.createElement(m,{checked:o,onClick:function(){fetch("/settings/site/"+a,{method:"POST"}).then((function(e){if(200===e.status){var t=JSON.parse(localStorage.getItem("sites"));t[a]=!t[a],he.emit("save",JSON.stringify({sites:t})),fetch("/jobs/requests/"+a,{method:"POST"}).then((function(e){var n;200===e.status?l((n=!o,"".concat(a," crawling has been ").concat(n?"enabled":"disabled")),b):(console.log("Something went wrong with setting up the ".concat(a," crawl, reverting crawl database back.")),e.json().then((function(t){console.log(e.status,t.response),l(t.response,v)})),fetch("/settings/site/"+a,{method:"POST"}).then((function(e){t[a]=!t[a],he.emit("save",JSON.stringify({sites:t})),200===e.status?console.log("Database reverted..."):console.log("Crap something really went wrong since this request worked just a moment ago...")})))}))}else 401===e.status&&(localStorage.clear(),i.push("login"))}))},inputProps:{"aria-label":a+" checkbox"}}))}),(function(e,t){return e.isToggled===t.isToggled})),ve=[g.a,f.a],Ee=function(e){function t(e){var a;Object(P.a)(this,t),a=Object(V.a)(this,Object(J.a)(t).call(this,e));var n=JSON.parse(localStorage.getItem("sites"));return a.state={toggles:[!0===n.Reddit,!0===n.Twitter]},a}return Object(D.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.history,n=this.state.toggles,o=E.map((function(e,t){return r.a.createElement(be,{key:t,site_img:ve[t],site_name:e,history:a,isToggled:n[t],index:t})}));return r.a.createElement("div",{className:t.platform_container},o)}},{key:"shouldComponentUpdate",value:function(e,t){return t.toggles!==this.state.toggles}},{key:"componentDidMount",value:function(){var e=this;he.on("update",(function(t){var a=JSON.parse(t);if(a.sites){var n=a.sites;localStorage.setItem("sites",JSON.stringify(n));for(var r=e.state.toggles,o=Object(ue.a)(r),i=0;i<E.length;++i)o[i]=n[E[i]];e.setState({toggles:o})}else a.companies?localStorage.setItem("companies",a.companies):a.email&&localStorage.setItem("email",a.email)}))}},{key:"componentWillUnmount",value:function(){he.off("update")}}]),t}(n.Component),ye=Object(W.a)((function(e){return{platform_container:{backgroundColor:"white",borderRight:"1px solid #ddd"}}}))(Ee),Se=a(6),ke=a(48),we=a(134),Oe=Object(O.a)((function(e){return{image:{width:100,height:100}}}));var je=function(e){var t=Oe(),a=e.container,n=e.img,o=e.children,i=e.site;return r.a.createElement(we.a,{className:a},i&&r.a.createElement("img",{src:n||y[i],alt:"Thumbnail",className:t.image}),o)},Ne=a(256),Ce=a(123),xe=a.n(Ce),Te=a(124),Me=a.n(Te),Ie=a(125),Ae=a.n(Ie),_e=a(128),Be=a.n(_e),Fe=a(127),Pe=a.n(Fe),Re=a(126),Ve=a.n(Re),Je=a(73),De=a(121),We=a.n(De),Le=a(122),He=a.n(Le),qe=Object(O.a)((function(e){return{icon:{marginRight:e.spacing(1),cursor:"pointer",transition:"transform 0.5s ease-in-out","&:hover":{transform:"scale(1.2)"}},favourited:{color:"#FD6095"},favourite:{color:"#FFDFEA"}}}));var ze=function(e){var t=qe(),a=e.favourite,n=e.id,o=e.history,i=e.unmount,c=e.handleFavourite,s=function(e){e.preventDefault(),fetch("".concat("/mentions/favourite/").concat(n),{method:"PATCH",headers:{"Content-Type":"application/json"}}).then((function(e){401===e.status?(localStorage.clear(),o.push("login")):e.ok?e.json().then((function(e){e.deleted?i():c(e.favourite)})):e.json().then((function(e){return console.log(e)}))}))};return a?r.a.createElement(We.a,{fontSize:"large",className:"".concat(t.favourited," ").concat(t.icon),onClick:s}):r.a.createElement(He.a,{fontSize:"large",className:"".concat(t.favourite," ").concat(t.icon),onClick:s})};var Ke=Object(O.a)((function(e){return{header:{display:"flex",marginBottom:e.spacing(1)},title:{flexGrow:1,marginRight:e.spacing(1)},sentiment:{color:e.primary}}}));var Ge=function(e){var t=Ke(),a=Number(100*e.sentiment).toFixed(2),n=e.title,o=e.bold,i=e.titleVariant,c=e.site,s=e.siteVariant,l=e.dateVariant,m=e.favourite,u=e.id,p=e.history,d=e.unmount,g=e.handleFavourite,h=e.date&&k(new Date(1e3*e.date));return r.a.createElement(C.a,{className:t.header},r.a.createElement(C.a,{className:t.title},r.a.createElement(A.a,{variant:i},o(n)),r.a.createElement(A.a,{variant:s,color:"textSecondary"},c),r.a.createElement(A.a,{variant:l,color:"textSecondary"},h)),r.a.createElement(ze,{className:t.favourite_icon,favourite:m,id:u,history:p,unmount:d,handleFavourite:g}),r.a.createElement(Ne.a,{title:"Score: ".concat(a),placement:"top","aria-label":"Sentiment score",className:t.sentiment},function(e){return Math.abs(e)<.2?r.a.createElement(Je.a,{fontSize:"large"},r.a.createElement("path",{d:"M9 14h6v1.5H9z"}),r.a.createElement("circle",{cx:"15.5",cy:"9.5",r:"1.5"}),r.a.createElement("circle",{cx:"8.5",cy:"9.5",r:"1.5"}),r.a.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})):e<0?e<-.8?r.a.createElement(xe.a,{fontSize:"large"}):e<-.5?r.a.createElement(Me.a,{fontSize:"large"}):r.a.createElement(Ae.a,{fontSize:"large"}):e>.8?r.a.createElement(Ve.a,{fontSize:"large"}):e>.5?r.a.createElement(Pe.a,{fontSize:"large"}):r.a.createElement(Be.a,{fontSize:"large"})}(e.sentiment)))};var Ue=function(e){var t=e.variant,a=e.color,n=e.bold,o=e.text;return r.a.createElement(A.a,{variant:t,color:a},n?n(o):o)},Qe=Object(O.a)((function(e){return{link:{textDecoration:"none",width:"100%","&:last-child":{marginBottom:e.spacing(10)}},container:{display:"flex",padding:e.spacing(2),width:"100%",boxSizing:"border-box",marginBottom:e.spacing(2)},text:{marginLeft:e.spacing(2),wordBreak:"break-word",width:"100%"}}}));var Ye=r.a.memo((function(e){var t=Qe(),a=e.id,n=e.img,o=e.title,i=e.site,c=e.snippet,s=e.bold,m=e.sentiment,u=e.date,p=e.favourite,d=e.history,g=e.unmount,h=e.handleFavourite;return r.a.createElement(l.b,{to:"".concat("/dashboard","/mention/").concat(a),className:t.link},r.a.createElement(je,{container:t.container,img:n,site:i},r.a.createElement(C.a,{className:t.text},r.a.createElement(Ge,{titleVariant:"body1",bold:s,title:o,sentiment:m,site:i,siteVariant:"body1",favourite:p,id:a,history:d,date:u,dateVariant:"body2",unmount:g,handleFavourite:h}),r.a.createElement(Ue,{variant:"caption",bold:s,text:c}))))}),(function(e,t){return e.id===t.id&&e.favourite===t.favourite})),Xe=a(247),Ze=Object(O.a)((function(e){return{top_section:{display:"flex",alignItems:"center",width:"100%",maxWidth:800,margin:"0 auto ".concat(e.spacing(4),"px auto")},mention_header:{flexGrow:1},mention_tabs:{backgroundColor:e.secondary,borderRadius:500},mention_tab:{borderRadius:500},tab_active:{backgroundColor:e.primary,color:"white"},tab_inactive:{backgroundColor:"transparent",color:e.primary}}}));var $e=r.a.memo((function(e){var t=Ze(),a=e.tab,n=e.click1,o=e.click2,i=e.click3;return r.a.createElement("div",{className:t.top_section},r.a.createElement(A.a,{variant:"h4",className:t.mention_header},"My Mentions"),r.a.createElement("div",{className:t.mention_tabs},r.a.createElement(Xe.a,{label:"Most Recent",className:"".concat(t.mention_tab," ").concat(0===a?t.tab_active:t.tab_inactive),onClick:n}),r.a.createElement(Xe.a,{label:"Most Popular",className:"".concat(t.mention_tab," ").concat(1===a?t.tab_active:t.tab_inactive),onClick:o}),r.a.createElement(Xe.a,{label:"Favourites",className:"".concat(t.mention_tab," ").concat(2===a?t.tab_active:t.tab_inactive),onClick:i})))}),(function(e,t){return e.tab===t.tab})),et=a(130),tt=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(V.a)(this,Object(J.a)(t).call(this,e))).handleTabChange=function(e){if(a.state.tabValue!==e){var t;switch(e){case 0:t="/recent";break;case 1:t="/popular";break;case 2:t="/favourite";break;default:t="/recent"}a.setState({tabValue:e,page:1,mentions:[],hasMore:!0,sort:t},(function(){return a.fetchMentions(!1)}))}},a.fetchMentions=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=a.props,n=t.searchString,r=t.platformFilters,o=t.nameFilters,i=t.history,c=Math.max(a.state.page-(e?0:1),1),s=Object.entries(r).map((function(e){var t=Object(Z.a)(e,2),a=t[0],n=t[1];return"".concat(a,"=").concat(n)})).join("&");s+="&"+Object.entries(o).map((function(e){var t=Object(Z.a)(e,2),a=t[0],n=t[1];return"".concat("company_").concat(a,"=").concat(n)})).join("&");var l="".concat("/mentions"+a.state.sort,"/").concat(c,"?").concat("search","=").concat(n,"&").concat(s);fetch(l,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){401===e.status?i.push("login"):e.ok?e.json().then((function(e){var t=!e.end;t||e.mentions.length>Object.keys(a.state.mentions).length?a.setState({mentions:e.mentions.reduce((function(e,t){return Object(ke.a)({},e,Object(Se.a)({},t.id,t))}),{}),page:c+1,hasMore:t}):a.setState({hasMore:t})})):e.json().then((function(e){return console.log(e)}))}))},a.summarizeString=function(e,t){if(e.length<t)return e;var n=e.match(a.props.regex);if(n){var r=n.index;return r<t?e.substring(0,t)+"...":r>e.length-t?"..."+e.substring(e.length-t):"..."+e.substring(r-t/2,r+t/2)+"..."}return e.substring(0,t)+"..."},a.deleteMention=function(e){return function(){delete a.state.mentions[e],a.setState({mentions:Object(ke.a)({},a.state.mentions)})}},a.favouriteMention=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.favouriteID,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props.favouriteValue,n=a.state.mentions[e];n&&(n.favourite=t,a.forceUpdate())},a.state={tabValue:0,page:1,sort:"/recent",mentions:[],hasMore:!0,regex:e.regex},a}return Object(D.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.history,o=t.bold,i=this.state,c=i.tabValue,s=i.mentions,l=i.hasMore,m=[];return 0===Object.keys(s).length?r.a.createElement("div",{className:a.container},r.a.createElement($e,{tab:c,click1:function(){return e.handleTabChange(0)},click2:function(){return e.handleTabChange(1)},click3:function(){return e.handleTabChange(2)}}),r.a.createElement(A.a,{variant:"h5",align:"center",color:"textSecondary",className:a.empty_msg},"There's nothing here! Make sure you have at least one platform tracked")):(Object.entries(s).forEach((function(t){var a=Object(Z.a)(t,2),i=a[0],c=a[1],s=e.summarizeString(c.snippet,280),l=e.summarizeString(c.title,100);m.push(r.a.createElement(Ye,{key:i,id:c.id,img:c.thumbnail,title:l,snippet:s,site:c.site,sentiment:c.sentiment,date:c.date,bold:o,favourite:c.favourite,history:n,unmount:e.deleteMention(c.id),handleFavourite:function(t){return e.favouriteMention(c.id,t)}}))})),r.a.createElement("div",{className:a.container},r.a.createElement($e,{tab:c,click1:function(){return e.handleTabChange(0)},click2:function(){return e.handleTabChange(1)},click3:function(){return e.handleTabChange(2)}}),r.a.createElement(et.a,{className:a.infinite_scroller,dataLength:m.length,next:this.fetchMentions,hasMore:l,height:"70vh",loader:r.a.createElement(A.a,{variant:"h5",align:"center",color:"textSecondary"},"Loading Mentions")},m)))}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,n=a.searchString,r=a.platformFilters,o=a.nameFilters,i=a.deleteID,c=a.favouriteTrigger,s=this.state,l=s.tabValue,m=s.page,u=s.sort,p=s.mentions,d=s.hasMore;return e.searchString!==n||e.platformFilters!==r||e.nameFilters!==o||e.deleteID!==i||e.favouriteTrigger!==c||t.tabValue!==l||t.page!==m||t.sort!==u||t.hasMore!==d||t.mentions!==p}},{key:"notifyNewMentions",value:function(){var e=this,t=this.props,a=t.enqueueSnackbar,o=t.closeSnackbar,i=t.classes;a("New mentions!",{variant:"info",anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:4e3,action:function(t){return r.a.createElement(n.Fragment,null,r.a.createElement(_.a,{className:i.snackbar_btn,onClick:function(){if(0===e.state.tabValue){var a=document.querySelector(".".concat(i.infinite_scroller));a&&a.scrollTo(0,0)}else e.handleTabChange(0);o(t)}},"View"))}})}},{key:"componentDidMount",value:function(){var e=this;this.fetchMentions(!1),he.on("mentions",(function(){console.log("fetching new mentions"),e.fetchMentions(!1),e.notifyNewMentions()})),he.on("disconnect",(function(){console.log("connection was lost, attempting to reconnect"),he.open()}))}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props,n=a.searchString,r=a.platformFilters,o=a.nameFilters,i=a.deleteID,c=a.favouriteTrigger;e.searchString!==n||e.platformFilters!==r||e.nameFilters!==o?this.setState({page:1,mentions:[],hasMore:!0},(function(){return t.fetchMentions(!1)})):e.deleteID!==i?this.deleteMention(i)():e.favouriteTrigger!==c&&this.favouriteMention()}},{key:"componentWillUnmount",value:function(){he.off("mentions")}}]),t}(n.Component),at=Object(s.withSnackbar)(Object(W.a)((function(e){return{container:{width:"90%",margin:"".concat(e.spacing(4),"px auto")},infinite_scroller:{width:"100%",boxSizing:"border-box",maxWidth:800,margin:"auto",paddingRight:e.spacing(10),height:"70vh",scrollBehavior:"smooth"},empty_msg:{alignSelf:"center",marginBottom:e.spacing(10)},snackbar_btn:{backgroundColor:"transparent",textTransform:"none","&:hover":{backgroundColor:"white",color:"#2979ff"}}}}))(tt)),nt=a(254),rt=a(248),ot=a(131),it=a.n(ot),ct=Object(O.a)((function(e){return{container:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(50%, 300px))"}}}));var st=function(e){var t=ct(),a=e.site,n=e.siteVariant,o=e.hits,i=e.hitsVariant,c=e.url,s=e.urlVariant,l=e.dateVariant,m=k(new Date(1e3*e.date));return r.a.createElement(C.a,{className:t.container},r.a.createElement(A.a,{variant:n,color:"textSecondary"},a),r.a.createElement(A.a,{variant:i,color:"textSecondary"},"Hits: ",o),r.a.createElement(A.a,{variant:l,color:"textSecondary"},m),r.a.createElement(rt.a,{href:c,variant:s,target:"_blank"},"Source ",r.a.createElement(it.a,null)))},lt=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(V.a)(this,Object(J.a)(t).call(this,e))).handleClose=function(){a.props.history.push("/dashboard")},a.handleDelete=function(){a.handleClose(),a.props.delete(a.props.id)},a.handleFavourite=function(e){a.setState({mention:Object(ke.a)({},a.state.mention,{favourite:e})}),a.props.favourite([a.props.id,e,!a.props.favouriteTrigger])},a.state={mention:null,message:"Loading Mention"},a}return Object(D.a)(t,e),Object(R.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!this.state.mention||this.state.mention.favourite!==t.mention.favourite||this.state.message!==t.message}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.bold,n=e.history,o=e.id,i=this.state,c=i.mention,s=i.message;if(c){var l=0!==c.snippet.length?c.snippet:"There is no text for this mention",m=0!==c.snippet.length?"initial":"textSecondary",u=c.site,p=c.hits,d=c.url,g=c.title,h=c.sentiment,f=c.date;return r.a.createElement(nt.a,{open:!0,onClose:this.handleClose,maxWidth:"xl",scroll:"paper"},r.a.createElement(je,{container:t.container,img:c.thumbnail,site:u},r.a.createElement(C.a,{className:t.info},r.a.createElement(Ge,{titleVariant:"h5",bold:a,title:g,id:o,sentiment:h,favourite:c.favourite,unmount:this.handleDelete,handleFavourite:this.handleFavourite}),r.a.createElement(st,{site:u,favourite:c.favourite,history:n,siteVariant:"h5",hitsVariant:"h5",hits:p,url:d,urlVariant:"h5",date:f,dateVariant:"h5"})),r.a.createElement(C.a,{className:t.snippet},r.a.createElement(Ue,{variant:"body1",color:m,bold:a,text:l}))))}return r.a.createElement(nt.a,{open:!0,onClose:this.handleClose,maxWidth:"xl",scroll:"paper"},r.a.createElement(je,{container:t.simpleContainer},r.a.createElement(Ue,{variant:"h5",color:"textSecondary",text:s})))}},{key:"componentDidMount",value:function(){var e=this;fetch("/mentions/mention/"+this.props.id,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){t.json().then((function(a){200===t.status?e.setState({mention:a}):401===t.status?(localStorage.clear(),e.props.history.push("login")):404===t.status?e.setState({message:"No Mention Found"}):console.log(t.status,a.response)}))}))}}]),t}(n.Component),mt=Object(W.a)((function(e){return{simpleContainer:{padding:e.spacing(4),margin:"auto"},container:{display:"grid",gridTemplateColumns:"1fr 9fr",gridGap:e.spacing(2),padding:e.spacing(4),width:"fit-content",maxWidth:1e3,margin:"auto"},info:{marginLeft:e.spacing(2),maxWidth:900},snippet:{gridColumn:"span 2",wordBreak:"break-word"}}}))(lt),ut=a(249),pt=a(253),dt=Object(O.a)((function(e){return{container:{padding:e.spacing(4)},header:{marginBottom:e.spacing(2)},platforms:{display:"grid",gridGap:e.spacing(3),gridTemplateColumns:"repeat(auto-fit, minmax(".concat(100,"px, 1fr))"),maxWidth:"".concat(150*Object.keys(y).length,"px"),margin:"".concat(e.spacing(3),"px auto")},names:{display:"grid",gridGap:e.spacing(3),gridTemplateColumns:"repeat(auto-fit, minmax(".concat(100,"px, 1fr))"),margin:"".concat(e.spacing(3),"px auto")},platform_container:{display:"grid",justifyItems:"center"},platform_logo:{width:100,height:100},platform_filter:{width:"100%",justifyContent:"center"},submit_btn:{display:"block",borderRadius:500,width:150,margin:"auto",padding:e.spacing(2),boxShadow:"0 0 5px ".concat(e.primary)}}}));var gt=function(e){var t=dt(),a=e.open,o=e.onClose,i=e.pFilters,c=e.nFilters,s=e.filter,l=Object(n.useState)(i),m=Object(Z.a)(l,2),u=m[0],p=m[1],d=Object(n.useState)(c),g=Object(Z.a)(d,2),h=g[0],f=g[1],b=function(e){return function(t){return p(Object(ke.a)({},u,Object(Se.a)({},e,t.target.checked)))}},v=function(e){return function(t){return f(Object(ke.a)({},h,Object(Se.a)({},e,t.target.checked)))}},E=[],S=[];return Object.entries(y).forEach((function(e){var a=Object(Z.a)(e,2),n=a[0],o=a[1];E.push(r.a.createElement("div",{key:n,className:t.platform_container},r.a.createElement("img",{src:o,className:t.platform_logo,alt:n}),r.a.createElement(ut.a,{labelPlacement:"top",className:t.platform_filter,control:r.a.createElement(pt.a,{color:"default",className:t.checkbox,checked:u[n],onChange:b(n),inputProps:{"aria-label":"".concat(n," checkbox")}}),label:n})))})),Object.entries(h).forEach((function(e){var a=Object(Z.a)(e,2),n=a[0],o=a[1];S.push(r.a.createElement("div",{key:n,className:t.platform_container},r.a.createElement(ut.a,{labelPlacement:"top",className:t.platform_filter,control:r.a.createElement(pt.a,{color:"default",className:t.checkbox,checked:o,onChange:v(n),inputProps:{"aria-label":"".concat(n," checkbox")}}),label:n})))})),r.a.createElement(nt.a,{open:a,onClose:o,onEnter:function(){p(i),f(c)},className:t.dialog,maxWidth:"md"},r.a.createElement(we.a,{className:t.container},r.a.createElement(A.a,{variant:"h5",align:"center",className:t.header},"Filter Search Results"),r.a.createElement(A.a,{variant:"body1",align:"center"},"Platforms"),r.a.createElement("div",{className:t.platforms},E),r.a.createElement(A.a,{variant:"body1",align:"center"},"Company Names"),r.a.createElement("div",{className:t.names,style:{maxWidth:"".concat(250*Object.keys(c).length,"px")}},S),r.a.createElement(_.a,{type:"submit",className:t.submit_btn,onClick:function(){o(),s(u,h)}},"Apply")))},ht=Object(O.a)((function(e){return{mentions_layout:{display:"grid",gridTemplateColumns:"minmax(300px, 2fr) 7fr",height:"100%"}}}));var ft=function(e){var t=ht(),a={},o={};if(localStorage.getItem("companies")){var i=localStorage.getItem("companies").split(",");E.forEach((function(e){return a[e]=!0})),i.forEach((function(e){return o[e]=!0}))}var c=Object(n.useState)(""),s=Object(Z.a)(c,2),l=s[0],u=s[1],p=Object(n.useState)(!1),d=Object(Z.a)(p,2),g=d[0],h=d[1],f=Object(n.useState)(a),b=Object(Z.a)(f,2),v=b[0],y=b[1],S=Object(n.useState)(o),k=Object(Z.a)(S,2),w=k[0],O=k[1],j=Object(n.useState)(-1),N=Object(Z.a)(j,2),x=N[0],T=N[1],M=Object(n.useState)([-1,!1,!1]),I=Object(Z.a)(M,2),A=I[0],_=I[1];if(localStorage.getItem("companies")&&localStorage.getItem("email")&&localStorage.getItem("sites")){he.on("connect",(function(){})),he.disconnected&&(he.open(),he.emit("login",localStorage.getItem("email")));var B=localStorage.getItem("companies").split(","),F=(""===l?B:B.concat([l])).map((function(e){return"\\b".concat(e,"\\b")})).join("|"),P=new RegExp(""===l?F:"\\b".concat(l,"\\b"),"i"),R=new RegExp(F,"gi"),V=function(e){var t=e.matchAll(R),a=[],n=!0,o=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(n=(c=s.next()).done);n=!0){var l=c.value;a.push(l.index),a.push(l.index+l[0].length)}}catch(d){o=!0,i=d}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}for(var m=[],u=0,p=0;p<a.length;p+=2)m.push(r.a.createElement(r.a.Fragment,{key:p},e.substring(u,a[p]))),m.push(r.a.createElement(C.a,{component:"strong",key:p+1},e.substring(a[p],a[p+1]))),u=a[p+1];return m.push(r.a.createElement(r.a.Fragment,{key:-1},e.substring(u))),m};return r.a.createElement(r.a.Fragment,null,r.a.createElement(me,{link:"settings",search:u,open:function(){return h(!0)}},r.a.createElement(ee.a,{fontSize:"large"})),r.a.createElement(gt,{open:g,onClose:function(){return h(!1)},filter:function(e,t){y(e),O(t)},pFilters:v,nFilters:w}),r.a.createElement("div",{className:t.mentions_layout},r.a.createElement(ye,{history:e.history}),r.a.createElement(at,{history:e.history,regex:P,bold:V,searchString:l,platformFilters:v,nameFilters:w,deleteID:x,favouriteID:A[0],favouriteValue:A[1],favouriteTrigger:A[2]}),r.a.createElement(m.b,{path:"/dashboard/mention/:id",render:function(e){return r.a.createElement(mt,{id:e.match.params.id,history:e.history,bold:V,delete:T,favourite:_,favouriteTrigger:A[2]})}})))}return he.connected&&(he.off("disconnect"),he.close()),r.a.createElement(m.a,{to:"login"})},bt=a(132),vt=a.n(bt),Et=Object(O.a)((function(e){return{link:{textDecoration:"none",color:"inherit"}}}));var yt=function(e){var t=Et(),a=e.children,n=e.link;return r.a.createElement(I,{flexGrow:1},r.a.createElement(l.b,{to:n,className:t.link},a))},St=Object(O.a)((function(e){return{input_btn:{padding:"".concat(e.spacing(1),"px ").concat(e.spacing(2),"px")},btn_remove:{color:e.primary,backgroundColor:e.secondary,"&:hover":{color:e.secondary,backgroundColor:e.primary}}}}));var kt=function(e){var t=St(),a=e.filled,o=e.val,i=e.add,c=e.remove,s=Object(n.useState)(a?o:""),l=Object(Z.a)(s,2),m=l[0],u=l[1];return r.a.createElement(we.a,{className:e.classIC},r.a.createElement(ae.a,{placeholder:"Company name (Max 5)",className:e.classI,value:m,onChange:a?void 0:function(e){return u(e.target.value)},autoComplete:"new-password",inputProps:{"aria-label":"Company name"}}),a?r.a.createElement(_.a,{className:"".concat(t.input_btn," ").concat(t.btn_remove),onClick:function(){c(m)}},"Remove"):r.a.createElement(_.a,{className:t.input_btn,onClick:function(){i(m),u("")}},"Add"))},wt=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(V.a)(this,Object(J.a)(t).call(this,e))).addName=function(e){var t=a.state.names,n=a.props.enqueueSnackbar;""===e?a.props.enqueueSnackbar("Cannot have an empty name",v):t.find((function(t){return t===e}))?n("Cannot have two identical names",v):a.setState({names:t.concat(e)})},a.removeName=function(e){var t=a.state.names,n=a.props.enqueueSnackbar;if(t.length>1){var r=t.findIndex((function(t){return t===e}));a.setState({names:t.slice(0,r).concat(t.slice(r+1,t.length))})}else n("Must have at least one name",v)},a.isEqualNames=function(){var e=localStorage.getItem("companies").split(",").sort(),t=a.state.names.sort(),n=e.length===t.length;return n&&e.forEach((function(e,a){return n=n&&e===t[a]})),n},a.handleEmailChange=function(e,t){return fetch("/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.state.email})}).then((function(t){return e(t)})).catch((function(e){return t(e)}))},a.handleNamesChange=function(e,t){fetch("/companies",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(Se.a)({},"companies",a.state.names))}).then((function(t){return e(t)})).catch((function(e){return t(e)}))},a.handleSave=function(){var e=!1,t=!1,n=!1,r=!1,o=Promise.resolve(!0),i=Promise.resolve(!0),c=a.props,s=c.enqueueSnackbar,l=c.history,m=a.state,u=m.email,p=m.names;localStorage.getItem("email")!==u&&(o=new Promise(a.handleEmailChange),e=!0),a.isEqualNames()||(i=new Promise(a.handleNamesChange),t=!0),Promise.all([o,i]).then((function(a){var o=Object(Z.a)(a,2),i=o[0],c=o[1];if(e)if(200===i.status)localStorage.setItem("email",u),n=!0,he.emit("save",JSON.stringify({email:u}));else{if(401===i.status)return localStorage.clear(),void l.push("login");i.json().then((function(e){s(e.response,v)}))}if(t)if(200===c.status)localStorage.setItem("companies",p),r=!0,he.emit("save",JSON.stringify({companies:localStorage.getItem("companies")}));else{if(401===c.status)return localStorage.clear(),void l.push("login");c.json().then((function(e){s("Error: ".concat(e.response),v)}))}n?s(r?"Email and Company names successfully changed":"Email succesfully changed",b):r&&s("Company names succesfully changed",b)}))},a.state={names:localStorage.getItem("companies").split(","),email:localStorage.getItem("email")},a}return Object(D.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.names,o=a.email,i=n.map((function(a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(kt,{filled:!0,val:a,remove:e.removeName,classIC:t.input_container,classI:t.input}),r.a.createElement("div",null))}));return r.a.createElement("div",{className:t.container},r.a.createElement(A.a,{variant:"h6"},"Your Company"),i,n.length>=5?r.a.createElement("div",null):r.a.createElement(kt,{filled:!1,val:"",add:this.addName,classIC:t.input_container,classI:t.input}),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement(A.a,{variant:"h6"},"Weekly Report"),r.a.createElement(we.a,{className:t.input_container},r.a.createElement(ae.a,{type:"email",placeholder:"Company email",className:t.input,value:o,onChange:function(t){return e.setState({email:t.target.value})},inputProps:{"aria-label":"Company email"}})),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement(_.a,{className:t.save_btn,onClick:this.handleSave},"Save"))}},{key:"componentDidMount",value:function(){var e=this;he.on("update",(function(t){var a=JSON.parse(t);if(a.sites)localStorage.setItem("sites",JSON.stringify(a.sites));else if(a.companies){var n=a.companies;localStorage.setItem("companies",n),e.setState({names:n.split(",")})}else if(a.email){var r=a.email;localStorage.setItem("email",r),e.setState({email:r})}}))}},{key:"componentWillUnmount",value:function(){he.off("update")}}]),t}(n.Component),Ot=Object(s.withSnackbar)(Object(W.a)((function(e){return{container:{width:"80%",margin:"".concat(e.spacing(6),"px auto ").concat(e.spacing(20),"px auto"),display:"grid",alignItems:"center",gridGap:e.spacing(1),gridTemplateColumns:"1fr 3fr",gridAutoRows:"65px",paddingRight:e.spacing(10),overflow:"auto",height:"80vh"},input_container:{display:"flex",borderRadius:500,padding:e.spacing(1)},input:{flexGrow:1,paddingLeft:e.spacing(1)},save_btn:{maxWidth:125}}}))(wt)),jt=Object(O.a)((function(e){return{tab:{padding:"".concat(e.spacing(2),"px 0"),cursor:"pointer"},tab_active:{color:e.primary},tab_inactive:{color:"initial"}}}));var Nt=function(e){var t=jt(),a=e.active,n=e.click,o="".concat(t.tab," ").concat(t.tab_active),i="".concat(t.tab," ").concat(t.tab_inactive);return r.a.createElement(A.a,{variant:"body2",className:a?o:i,onClick:n},e.children)},Ct=Object(O.a)((function(e){var t;return{tab_container:(t={backgroundColor:"white",borderRight:"1px solid #ddd",padding:e.spacing(6)},Object(Se.a)(t,e.breakpoints.down("sm"),{padding:e.spacing(4)}),Object(Se.a)(t,e.breakpoints.down("xs"),{padding:e.spacing(1)}),t),title_container:{position:"relative",marginBottom:e.spacing(4)},title:{display:"inline",fontWeight:"bold"},icon:{position:"absolute",top:"50%",transform:"translateY(-50%)",marginLeft:e.spacing(1),color:e.primary}}}));var xt=function(e){var t=Ct(),a=Object(n.useState)(0),o=Object(Z.a)(a,2),i=o[0],c=o[1],s=[function(){return c(0)},function(){return c(1)},function(){c(2),fetch("/logout",{method:"POST"}).then((function(t){he.emit("logout",localStorage.getItem("email")),localStorage.clear(),he.off("disconnect"),he.close(),e.history.push("login")}))}],l=["Company","Security","Log out"].map((function(e,t){return r.a.createElement(Nt,{key:e,active:i===t,click:s[t]},e)}));return r.a.createElement("div",{className:t.tab_container},r.a.createElement(C.a,{className:t.title_container},r.a.createElement(A.a,{variant:"h4",className:t.title},"Settings"),r.a.createElement(ee.a,{className:t.icon,fontSize:"large"})),l)},Tt=Object(O.a)((function(e){var t;return{settings_layout:(t={display:"grid",gridTemplateColumns:"minmax(20%, 300px) 1fr",height:"100%"},Object(Se.a)(t,e.breakpoints.down("sm"),{gridTemplateColumns:"minmax(225px, 1fr) 3fr"}),Object(Se.a)(t,e.breakpoints.down("xs"),{gridTemplateColumns:"minmax(190px, 1fr) 3fr"}),t)}}));var Mt=function(e){var t=Tt();return localStorage.getItem("companies")&&localStorage.getItem("email")&&localStorage.getItem("sites")?r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,{link:"/dashboard"},r.a.createElement(vt.a,{fontSize:"large"})),r.a.createElement("div",{className:t.settings_layout},r.a.createElement(xt,{history:e.history}),r.a.createElement(Ot,{history:e.history}))):r.a.createElement(m.a,{to:"login"})};var It=function(){return r.a.createElement(c.a,{theme:p},r.a.createElement(s.SnackbarProvider,{maxSnack:3},r.a.createElement(l.a,null,r.a.createElement(m.b,{exact:!0,path:"/",component:w}),r.a.createElement(m.b,{path:"/signup",component:U}),r.a.createElement(m.b,{path:"/login",component:X}),r.a.createElement(m.b,{path:"/dashboard",component:ft}),r.a.createElement(m.b,{path:"/settings",component:Mt}))))};i.a.render(r.a.createElement(It,null),document.getElementById("root"))},75:function(e,t,a){e.exports=a.p+"static/media/reddit.00d33694.png"},76:function(e,t,a){e.exports=a.p+"static/media/twitter.b89f0dfd.png"}},[[150,1,2]]]);
//# sourceMappingURL=main.a063dd8c.chunk.js.map